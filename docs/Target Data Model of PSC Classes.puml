@startuml
'https://plantuml.com/class-diagram
'ortho
skinparam linetype poly
skinparam nodesep 50 /' horizontal separator '/
skinparam ranksep 50 /' vertical separator '/
skinparam titleBorderRoundCorner 15
skinparam titleBorderThickness 1
skinparam titleBorderColor black
skinparam titleBackgroundColor PaleTurquoise
skinparam groupInheritance 1
scale 1
hide empty members
'hide circle'
skinparam titleFontSize 16

title PSC Filing API: Target Data Model Class Structure

    package "model" {

        package "dto" {

            class AddressDto {
                -addressLine1
                -addressLine2
                -careOf
                -country
                -poBox
                -postalCode
                -premises
                -region
            }

            class Date3TupleDto {
                -day:int
                -month:int
                -year:int
            }
            note right of Date3TupleDto
               day is null
               for partial DOB
            end note

            class IdentificationDto {
                -countryRegistered
                -placeRegistered
                -registrationNumber
                -legalAuthority
               -legalForm
            }

            class NameElementsDto {
                -forename
                -otherForenames
                -surname
                -title
            }
            
            class PscStatementDto {
                -referenceEtag
                -referenceStatementId
                -restrictionsNoticeWithdrawlReason
                -statementActionDate: LocalDate
                -statementType []
            }

          note left of PscStatementDto::referenceStatementId
                Required for PSC09
           end note

          note left of PscStatementDto::statementType
                See public spec for full list
           end note            

            abstract class PscDto {
                -address: AddressDto
                -addressSameAsRegisteredOfficeAddress: Boolean
                -ceasedOn: LocalDate
                -name
                -naturesOfControl[1..*]
                -notifiedOn: LocalDate
                -referenceEtag
                -referencePscId
                -referencePscListEtag
                -registerEntryDate: LocalDate
            }

           note left of PscDto::naturesOfControl
                See public spec for full list
            end note

/'            together {
                class PscIndividualDto
                class PscFilingCorporateDto
                class PscFilingRleDto
            }'/

            class PscIndividualDto {
                -countryOfResidence
                -dateOfBirth: Date3TupleDto
                -nameElements: NameElementsDto
                -nationality
                -residentialAddress: AddressDto
                -residentialAddressSameAsCorrespondenceAddress: Boolean
            }

           note "This models an individual PSC" as Note2
             Note2 ... PscIndividualDto

            class PscIdentifiedDto {
                -identification:IdentificationDto
            }
           note "This models the RLE (corporate) and the \nORP (legal) types of PSC" as Note1
                Note1 ... PscIdentifiedDto
/'            together {
                class AddressDto
                class Date3TupleDto
                class IdentificationDto
                class NameElementsDto
            }'/            

            PscIndividualDto::dateOfBirth o-- Date3TupleDto
            PscDto::address o-- AddressDto
            PscIndividualDto::residentialAddress o-- AddressDto
            PscDto <|-- PscIdentifiedDto
            PscIdentifiedDto::identification o-- IdentificationDto
            PscDto <|-- PscIndividualDto
            PscIndividualDto::nameElements o-- NameElementsDto
        }
    }

@enduml